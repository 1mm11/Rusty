<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>БАЗА ДАННЫХ МВД</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        body { font-family: 'Courier New', monospace; background-color: #0a0c10; color: #00ff41; padding: 20px; }
        .box { max-width: 600px; margin: auto; background: #161b22; border: 2px solid #30363d; padding: 20px; border-radius: 10px; box-shadow: 0 0 20px rgba(0,255,65,0.2); }
        input, textarea, button { width: 100%; padding: 12px; margin: 5px 0; border-radius: 5px; border: 1px solid #00ff41; background: #0d1117; color: #00ff41; }
        button { cursor: pointer; font-weight: bold; text-transform: uppercase; }
        button:hover { background: #00ff41; color: #000; }
        .hidden { display: none; }
        .card { border: 1px solid #00ff41; padding: 15px; margin-top: 15px; display: flex; gap: 15px; align-items: center; }
        .card img { width: 80px; height: 80px; border: 1px solid #00ff41; object-fit: cover; }
    </style>
</head>
<body>

<div class="box">
    <h2 style="text-align: center;">ЦЕНТРАЛЬНЫЙ АРХИВ</h2>
    
    <div id="login">
        <input type="password" id="p_code" placeholder="Введите код доступа...">
        <button onclick="login()">АВТОРИЗАЦИЯ</button>
    </div>

    <div id="view" class="hidden">
        <button onclick="location.reload()" style="background: #ff4444; color: white; border: none;">ВЫЙТИ</button>
        <div id="list">Загрузка данных из облака...</div>
    </div>

    <div id="add" class="hidden">
        <input type="text" id="n" placeholder="Ник игрока">
        <input type="text" id="id" placeholder="ID код">
        <input type="text" id="img" placeholder="Ссылка на фото (URL)">
        <input type="number" id="s" placeholder="Судимости">
        <input type="number" id="k" placeholder="Казни">
        <input type="text" id="t" placeholder="Срок">
        <textarea id="v" placeholder="Нарушения"></textarea>
        <button onclick="save()">ВНЕСТИ В БАЗУ</button>
    </div>
</div>

<script>
    const firebaseConfig = {
        apiKey: "ВСТАВЬ_СВОЙ_API_KEY_ЗДЕСЬ", // Возьми в Project Settings
        databaseURL: "https://dfdf-ba19f-default-rtdb.firebaseio.com/",
        projectId: "dfdf-ba19f",
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    function login() {
        const c = document.getElementById('p_code').value;
        if (c === '5389') { document.getElementById('login').classList.add('hidden'); document.getElementById('view').classList.remove('hidden'); load(); }
        else if (c === '4583') { document.getElementById('login').classList.add('hidden'); document.getElementById('add').classList.remove('hidden'); }
        else { alert("НЕВЕРНЫЙ КОД"); }
    }

    function save() {
        const data = {
            n: document.getElementById('n').value,
            id: document.getElementById('id').value,
            img: document.getElementById('img').value || 'https://via.placeholder.com/80',
            s: document.getElementById('s').value,
            k: document.getElementById('k').value,
            t: document.getElementById('t').value,
            v: document.getElementById('v').value
        };
        db.ref('players').push(data).then(() => { alert("Запись создана!"); location.reload(); });
    }

    function load() {
        db.ref('players').on('value', (s) => {
            const list = document.getElementById('list');
            list.innerHTML = '';
            s.forEach((child) => {
                const p = child.val();
                list.innerHTML += `<div class="card">
                    <img src="${p.img}">
                    <div>
                        <b>${p.n}</b> [ID: ${p.id}]<br>
                        Срок: ${p.t} | Судимостей: ${p.s} | Казней: ${p.k}<br>
                        <i style="color: #888">${p.v}</i>
                    </div>
                </div>`;
            });
        });
    }
</script>
</body>
</html>
